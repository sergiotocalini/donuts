{% extends "base.html" %}
{% block js%}
<script>
{% include 'libs.js' %}
	$( document ).ready(function() {	
		$("#add-ddns").click(function(event) {
			console.log('hey!');
			$('#AddDDNS').modal('show');
		});
		$(".remove_ddns").click(function(event) {
			event.preventDefault();
			var url = $(this).attr('href');
       		console.log(url);
			bootbox.confirm("Are you sure you want to remove this ddns?", function(result) {
       			 if (result == true){

       			 	callUrlAndReload(url);
		        }
    		}); 
		});
	});
</script>

{% endblock%}
{% block search_nav %}{% endblock %}

{% block main %}
	<nav class="navbar navbar-custom">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header col-md-4">
				<button type="button" id="add-ddns" class=" btn btn-success  navbar-btn "> <i class="fa fa-plus"></i> Add Dyn</button> 
			</li>
		</div>
		<!-- Collect the nav links, forms, and other content for toggling -->
		</div><!-- /.container-fluid -->
	</nav>

<div class="panel panel-default">
	<table id="Table"
		 class="table table-compact table-striped table-hover table-bordered table-condensed table-compact table-nowrap" 
		cellspacing="0">
		<thead>
			<tr>
				<th>hostname</th>
				<th>user</th>
				<th>hash</th>
				<th>ip</th>
				<th>last update</th>
				<th>delete</th>
			</tr>
		</thead>
		<tbody >
			{% for ddns in ctx.ddns %}
			<tr id="{{ddns.id}}">
				<td>
					{{ddns.ddns}}
				</td>
				<td>
					{{ddns.user_email}}
				</td>
				<td>
					{{ddns.hash}}
				</td>
				<td>
					{{ddns.ip}}
				</td>

				<td>
					{{ddns.last_update}}
				</td>
				<td>
				   <a class='remove_ddns' href='{{url_for('delete_ddns')}}?id={{ddns._id}}' ><i class='fa fa-trash'></i> </a> 
				</td>

			</tr>	
			{% endfor %}
		</tbody>
	</table>
</div>


{% endblock %}


{% block modals %}

<!-- Modal Add -->
<div class="modal fade bs-example-modal-lg" id="AddDDNS" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" style="width: 400">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="centered modal-title" id="AddDDNSModalZoneName">Add DDNS </h4>
			</div>
			<div class="modal-body">

				<form id="AddDDNSForm" role="form" class="form form-horizontal" method='POST'>
					<div class="form-group">
						<label class="control-label col-sm-3" for="ddns">Hostname:</label>
						<div class="col-sm-8">
							<input required type="ddns" class="form-control" id="ddns" name="ddns" placeholder="DDNS Name">
							<div id='ddns_error' class="alert alert-danger hide">DDNS is wrong.</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- /Modal Add -->

{% endblock %}